\documentclass{scrartcl}

\usepackage{brian}
\usepackage{mathtools}
%\usepackage{chngcntr}
\newcommand{\conj}[1]{\overline{#1}}
\newcommand{\hyper}[1]{\prescript{*}{}{#1}}
\newcommand{\standard}[1]{\prescript{\sigma}{}{#1}}
\renewcommand{\define}{:=}
\DeclareMathOperator{\st}{st}

\begin{document}

  Let $E$ be a vector space over $\C$. 
\begin{defn}[Hermitian]
  A map $A\in \End{E}$ is Hermitian iff
  \[
    \inner{Ax}{y}=\inner{x}{Ay}
  \]
\end{defn}
\begin{theorem}[finite spectral theorem]
  \label{finite-spectral-theorem}
  Suppose $E\cong \C^n$ is hermitian. Then
  \begin{itemize}
  \item $E$ has eigenvectors that are an orthonormal basis of $E$.
  \item All eigenvalues of $E$ are real. 
  \end{itemize}

\end{theorem}
\begin{proof}
  \renewcommand{\vec}{}
  By the fundamental theorem of algebra, the characterestic polynomial
  \[
    |A-xI|
  \]
  has a root. Hence $A$ has an eigenvalue-eigenvector pair $\lambda, \vec e$. But
  \[
    \lambda \inner{\vec e}{\vec e}=\inner{\vec e}{A \vec e}=\inner{A\vec e}{\vec e}=\conj\lambda \inner{\vec e}{\vec e}
  \]
  thus $\lambda = \conj\lambda$. Ergo, $\lambda\in \R$. 

  Now consider $A|e^\perp$. Suppose $\inner{x}{e}=0$. Then 
  \[
    0=\lambda\inner{x}{e}=\inner{x}{Ae}=\inner{Ax}{e}
  \]
  Hence $A|e^\perp\in\End(e^\perp)$. Induction on dimension proves the theorem. 
\end{proof}

Let $\bullet$ denote pointwise multiplication. 
\begin{cor}[diagonalization]
  \label{thm:diag}
  If $A\in\End E$, then 
  \[
    A=P^{-1}(v\bullet\_)P\\
  \]
  where $P$ is unitary and $v\in E$ is real.
\end{cor}

\begin{defn}[standard part of operator]
  \[
  \begin{matrix}
   \st: &\End E &\to &E \\
    &(\st T)(x) &\define& \st( T(\hyper x))
  \end{matrix}
  \]
\end{defn}

\begin{theorem}[infinite spectral theorem]
  Suppose $E$ is a Hilbert space. 
  If $A\in\End E$ is hermitian, then
  \[
    A = P^{-1}(v\bullet \_)P
  \]
  with $P$ unitary and $v\in P(E)$ real.
\end{theorem}
\begin{proof}
  Consider a nonstandard model of functional analysis. 
  Fix a hyperfinite-dimensional subspace $F$ such that
  \[
    \standard E \subseteq F \subseteq \hyper E
  \]
  There is some hermitian $B\in\End F$ such that $B|\standard E = \hyper A|\standard E$. This $B$ simultaneously satisfies hermitian-ness and $B(\hyper e)=\hyper(Ae)$ for each $e$ in some (standard) basis of $E$. Such a $B$ exists, internal to a sufficiently saturated model.

  By $*$--transferring \nameref{thm:diag}, there is some unitary $P:F\xrightarrow{\sim} \tilde F$ and real $v\in \tilde F$ such that
  \begin{equation}
    B = P^{-1}(v\bullet\_)P
    \label{eq:spec-diag}
  \end{equation}
  By construction, $B(\standard E) \subseteq \standard E$.

  Let $\tilde E= P(\standard E)$ be a standard Hilbert space. Say $\st P: E \to \tilde E$ and $\st v \in \tilde E$. 
  Now
  \[
    (\st P)^{-1}=\st(P^{-1})
  \]
  similarly,
  \[
    \bigl(\st(v\bullet\_)\bigr)(x)=\st(v\bullet\hyper x) = \st v\bullet x = (\st v\bullet\_)x
  \]
  By construction, $\st B=A$, hence \cref{eq:spec-diag} becomes
  \[
    A=\st(P)^{-1} (\st v\bullet\_) \st(P)
  \]
\end{proof}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
